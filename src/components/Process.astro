---
import { getLangFromUrl, useTranslations } from '../i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const steps = [
  {
    number: '01',
    title: t('process.step1.title'),
    description: t('process.step1.desc'),
    icon: `<path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z" />`
  },
  {
    number: '02',
    title: t('process.step2.title'),
    description: t('process.step2.desc'),
    icon: `<path stroke-linecap="round" stroke-linejoin="round" d="M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25zM6.75 12h.008v.008H6.75V12zm0 3h.008v.008H6.75V15zm0 3h.008v.008H6.75V18z" />`
  },
  {
    number: '03',
    title: t('process.step3.title'),
    description: t('process.step3.desc'),
    icon: `<path stroke-linecap="round" stroke-linejoin="round" d="M15.59 14.37a6 6 0 01-5.84 7.38v-4.8m5.84-2.58a14.98 14.98 0 006.16-12.12A14.98 14.98 0 009.631 8.41m5.96 5.96a14.926 14.926 0 01-5.841 2.58m-.119-8.54a6 6 0 00-7.381 5.84h4.8m2.581-5.84a14.927 14.927 0 00-2.58 5.84m2.699 2.7c-.103.021-.207.041-.311.06a15.09 15.09 0 01-2.448-2.448 14.9 14.9 0 01.06-.312m-2.24 2.39a4.493 4.493 0 00-1.757 4.306 4.493 4.493 0 004.306-1.758M16.5 9a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z" />`
  },
  {
    number: '04',
    title: t('process.step4.title'),
    description: t('process.step4.desc'),
    icon: `<path stroke-linecap="round" stroke-linejoin="round" d="M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z" />`
  }
];
---

<section class="section-padding bg-dark">
  <div class="container-custom">
    <div class="mx-auto max-w-3xl text-center">
      <h2 class="text-3xl font-bold text-light md:text-4xl">
        {t('process.title')}
      </h2>
    </div>

    <div class="relative mt-12 md:mt-16">
      <!-- Connection line -->
      <div class="absolute left-8 top-0 hidden h-full w-0.5 bg-gradient-to-b from-accent via-accent/50 to-transparent md:left-1/2 md:-translate-x-1/2 lg:block"></div>

      <div class="space-y-8 md:space-y-12">
        {steps.map((step, index) => (
          <div class={`relative flex flex-col gap-6 md:flex-row md:gap-12 ${index % 2 === 1 ? 'md:flex-row-reverse' : ''}`}>
            <!-- Content -->
            <div class={`flex-1 ${index % 2 === 1 ? 'md:text-right' : ''}`}>
              <div class={`rounded-2xl border border-light/5 bg-dark p-6 shadow-sm md:p-8 ${index % 2 === 1 ? 'md:ml-auto' : ''} max-w-lg`}>
                <div class="mb-4 flex items-center gap-4">
                  <div class="flex h-12 w-12 items-center justify-center rounded-xl bg-accent/10 text-accent">
                    <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5" set:html={step.icon} />
                  </div>
                  <span class="text-sm font-bold text-accent">{step.number}</span>
                </div>
                <h3 class="text-xl font-semibold text-light">
                  {step.title}
                </h3>
                <p class="mt-2 text-light/60">
                  {step.description}
                </p>
              </div>
            </div>

            <!-- Center dot -->
            <div class="absolute left-8 top-8 hidden h-4 w-4 -translate-x-1/2 rounded-full border-4 border-dark bg-accent md:left-1/2 lg:block"></div>

            <!-- Spacer for alternating layout -->
            <div class="hidden flex-1 md:block"></div>
          </div>
        ))}
      </div>
    </div>
  </div>
</section>
